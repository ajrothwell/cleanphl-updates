{"version":3,"sources":["webpack:///./node_modules/@philly/vue-mapping/src/components/PngMarker.vue","webpack:///node_modules/@philly/vue-mapping/src/components/PngMarker.vue","webpack:///./node_modules/@philly/vue-mapping/src/components/PngMarker.vue?2931"],"names":["render","staticRenderFns","PngMarkervue_type_script_lang_js_","name","props","h","mounted","proto_initIcon","leaflet_src","prototype","_initIcon","proto_setPos","_setPos","oldIE","TRANSFORM","addInitHook","iconOptions","this","options","icon","iconAnchor","rotationOrigin","rotationAngle","on","e","target","_applyRotation","include","call","pos","_icon","style","setRotationAngle","angle","update","setRotationOrigin","origin","leafletElement","$leafletElement","createLeafletElement","map","$store","state","addTo","destroyed","_map","removeLayer","watch","nextRotationAngle","latlng","nextLatLng","methods","iconUrl","iconSize","parentMounted","parent","components_PngMarkervue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"+HAAAA,EAAAC,cCQAC,EAAA,CACAC,KAAA,YACAC,MAAA,CACA,OACA,SACA,iBAEAJ,OAPA,SAOAK,KAOAC,QAdA,WAeA,IAAAC,EAAAC,EAAA,UAAAC,UAAAC,UACAC,EAAAH,EAAA,UAAAC,UAAAG,QAEAC,EAAA,gBAAAL,EAAA,WAAAM,UAEAN,EAAA,UAAAO,YAAA,WACA,IAAAC,EAAAC,KAAAC,QAAAC,MAAAF,KAAAC,QAAAC,KAAAD,QACAE,EAAAJ,GAAAC,KAAAC,QAAAC,KAAAD,QAAAE,WACAA,IACAA,IAAA,SAAAA,EAAA,SAEAH,KAAAC,QAAAG,eAAAJ,KAAAC,QAAAG,gBAAAD,GAAA,gBACAH,KAAAC,QAAAI,cAAAL,KAAAC,QAAAI,eAAA,EAGAL,KAAAM,GAAA,gBAAAC,KAAAC,OAAAC,qBAGAlB,EAAA,UAAAmB,QAAA,CACAjB,UAAA,WACAH,EAAAqB,KAAAX,OAGAL,QAAA,SAAAiB,GACAlB,EAAAiB,KAAAX,KAAAY,GACAZ,KAAAS,kBAGAA,eAAA,WACAT,KAAAC,QAAAI,gBACAL,KAAAa,MAAAC,MAAAvB,EAAA,WAAAM,UAAA,UAAAG,KAAAC,QAAAG,eAEAR,EAEAI,KAAAa,MAAAC,MAAAvB,EAAA,WAAAM,WAAA,UAAAG,KAAAC,QAAAI,cAAA,OAGAL,KAAAa,MAAAC,MAAAvB,EAAA,WAAAM,YAAA,YAAAG,KAAAC,QAAAI,cAAA,SAKAU,iBAAA,SAAAC,GAGA,OAFAhB,KAAAC,QAAAI,cAAAW,EACAhB,KAAAiB,SACAjB,MAGAkB,kBAAA,SAAAC,GAGA,OAFAnB,KAAAC,QAAAG,eAAAe,EACAnB,KAAAiB,SACAjB,QAIA,IAAAoB,EAAApB,KAAAqB,gBAAArB,KAAAsB,uBACAC,EAAAvB,KAAAwB,OAAAC,MAAAF,QAGAA,GACAH,EAAAM,MAAAH,IAGAI,UA9EA,WAgFA3B,KAAAqB,gBAAAO,KAAAC,YAAA7B,KAAAqB,kBAEAS,MAAA,CACAzB,cADA,SACA0B,GAEA/B,KAAAqB,gBAAAO,KAAAC,YAAA7B,KAAAqB,iBACA,IAAAD,EAAApB,KAAAqB,gBAAArB,KAAAsB,uBACAC,EAAAvB,KAAAwB,OAAAC,MAAAF,QAGAA,GACAH,EAAAM,MAAAH,IAGAS,OAZA,SAYAC,GAEAjC,KAAAqB,gBAAAO,KAAAC,YAAA7B,KAAAqB,iBACA,IAAAD,EAAApB,KAAAqB,gBAAArB,KAAAsB,uBACAC,EAAAvB,KAAAwB,OAAAC,MAAAF,QAGAA,GACAH,EAAAM,MAAAH,KAIAW,QAAA,CACAZ,qBADA,WAIA,IAAApB,EAAAX,EAAA,SACA4C,QAAAnC,KAAAE,KACAkC,SAAA,QACAjC,WAAA,SAIA,OAAAZ,EAAA,UAAAS,KAAAgC,OAAA,CACA9B,OACAG,cAAAL,KAAAK,iBAGAgC,cAhBA,SAgBAC,GACA,IAAAf,EAAAe,EAAAjB,gBACArB,KAAAqB,gBAAAK,MAAAH,MCpIgTgB,EAAA,cFOhTC,EAAgBC,OAAAC,EAAA,KAAAD,CACdF,EACFxD,EACAC,GACA,EACA,KACA,KACA,MAIe2D,EAAA,WAAAH","file":"js/mbmp_pvm_PngMarker.7dfc3497.js","sourcesContent":["var render, staticRenderFns\nimport script from \"./PngMarker.vue?vue&type=script&lang=js&\"\nexport * from \"./PngMarker.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<!--\n  wraps Leaflet.vector-markers as a vue component\n  https://github.com/hiasinho/Leaflet.vector-markers\n-->\n\n<script>\n  import * as L from 'leaflet';\n\n  export default {\n    name: 'PngMarker',\n    props: [\n      'icon',\n      'latlng',\n      'rotationAngle'\n    ],\n    render(h) {\n      // for some reason, the react prop that `this.orientation` depends on has\n      // to be evaluated once in order to receive updates.\n      // this.orientation;\n\n      return;\n    },\n    mounted() {\n      var proto_initIcon = L.Marker.prototype._initIcon;\n      var proto_setPos = L.Marker.prototype._setPos;\n\n      var oldIE = (L.DomUtil.TRANSFORM === 'msTransform');\n\n      L.Marker.addInitHook(function () {\n          var iconOptions = this.options.icon && this.options.icon.options;\n          var iconAnchor = iconOptions && this.options.icon.options.iconAnchor;\n          if (iconAnchor) {\n              iconAnchor = (iconAnchor[0] + 'px ' + iconAnchor[1] + 'px');\n          }\n          this.options.rotationOrigin = this.options.rotationOrigin || iconAnchor || 'center bottom' ;\n          this.options.rotationAngle = this.options.rotationAngle || 0;\n\n          // Ensure marker keeps rotated during dragging\n          this.on('drag', function(e) { e.target._applyRotation(); });\n      });\n\n      L.Marker.include({\n          _initIcon: function() {\n              proto_initIcon.call(this);\n          },\n\n          _setPos: function (pos) {\n              proto_setPos.call(this, pos);\n              this._applyRotation();\n          },\n\n          _applyRotation: function () {\n              if(this.options.rotationAngle) {\n                  this._icon.style[L.DomUtil.TRANSFORM+'Origin'] = this.options.rotationOrigin;\n\n                  if(oldIE) {\n                      // for IE 9, use the 2D rotation\n                      this._icon.style[L.DomUtil.TRANSFORM] = 'rotate(' + this.options.rotationAngle + 'deg)';\n                  } else {\n                      // for modern browsers, prefer the 3D accelerated version\n                      this._icon.style[L.DomUtil.TRANSFORM] += ' rotateZ(' + this.options.rotationAngle + 'deg)';\n                  }\n              }\n          },\n\n          setRotationAngle: function(angle) {\n              this.options.rotationAngle = angle;\n              this.update();\n              return this;\n          },\n\n          setRotationOrigin: function(origin) {\n              this.options.rotationOrigin = origin;\n              this.update();\n              return this;\n          }\n      });\n\n      const leafletElement = this.$leafletElement = this.createLeafletElement();\n      const map = this.$store.state.map.map;\n\n      // REVIEW kind of hacky/not reactive?\n      if (map) {\n        leafletElement.addTo(map);\n      }\n    },\n    destroyed() {\n      //console.log('pngMarker destroyed fired, latlng is', this.latlng);\n      this.$leafletElement._map.removeLayer(this.$leafletElement);\n    },\n    watch: {\n      rotationAngle(nextRotationAngle) {\n        // console.log('pngMarker orientation changed', nextRotationAngle);\n        this.$leafletElement._map.removeLayer(this.$leafletElement);\n        const leafletElement = this.$leafletElement = this.createLeafletElement();\n        const map = this.$store.state.map.map;\n\n        // REVIEW kind of hacky/not reactive?\n        if (map) {\n          leafletElement.addTo(map);\n        }\n      },\n      latlng(nextLatLng) {\n        // console.log('pngMarker orientation changed', nextRotationAngle);\n        this.$leafletElement._map.removeLayer(this.$leafletElement);\n        const leafletElement = this.$leafletElement = this.createLeafletElement();\n        const map = this.$store.state.map.map;\n\n        // REVIEW kind of hacky/not reactive?\n        if (map) {\n          leafletElement.addTo(map);\n        }\n      }\n    },\n    methods: {\n      createLeafletElement() {\n        // console.log('pngMarker createLeafletElement is running');\n\n        const icon = L.icon({\n            iconUrl: this.icon,\n            iconSize: [26, 16],\n            iconAnchor: [11, 8],\n          })\n\n        // console.log('createLeafletElement is running, this.latlng:', this.latlng);\n        return L.marker(this.latlng, {\n          icon: icon,\n          rotationAngle: this.rotationAngle,\n        });\n      },\n      parentMounted(parent) {\n        const map = parent.$leafletElement;\n        this.$leafletElement.addTo(map);\n      },\n    }\n  };\n</script>\n","import mod from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./PngMarker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../cache-loader/dist/cjs.js??ref--12-0!../../../../thread-loader/dist/cjs.js!../../../../babel-loader/lib/index.js!../../../../cache-loader/dist/cjs.js??ref--0-0!../../../../vue-loader/lib/index.js??vue-loader-options!./PngMarker.vue?vue&type=script&lang=js&\""],"sourceRoot":""}