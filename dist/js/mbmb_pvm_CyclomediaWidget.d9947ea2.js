(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["mbmb_pvm_CyclomediaWidget"],{"0a90":function(t,e,n){var o=n("63b6"),r=n("10ff");o(o.G+o.F*(parseFloat!=r),{parseFloat:r})},"0fc9":function(t,e,n){var o=n("3a38"),r=Math.max,i=Math.min;t.exports=function(t,e){return t=o(t),t<0?r(t+e,0):i(t,e)}},"10ff":function(t,e,n){var o=n("e53d").parseFloat,r=n("a1ce").trim;t.exports=1/o(n("e692")+"-0")!==-1/0?function(t){var e=r(String(t),3),n=o(e);return 0===n&&"-"==e.charAt(0)?-0:n}:o},1654:function(t,e,n){"use strict";var o=n("71c1")(!0);n("30f1")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=o(e,n),this._i+=t.length,{value:t,done:!1})})},1691:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"1af6":function(t,e,n){var o=n("63b6");o(o.S,"Array",{isArray:n("9003")})},"241e":function(t,e,n){var o=n("25eb");t.exports=function(t){return Object(o(t))}},"30f1":function(t,e,n){"use strict";var o=n("b8e3"),r=n("63b6"),i=n("9138"),a=n("35e8"),c=n("481b"),s=n("8f60"),u=n("45f2"),l=n("53e2"),p=n("5168")("iterator"),f=!([].keys&&"next"in[].keys()),d="@@iterator",m="keys",h="values",v=function(){return this};t.exports=function(t,e,n,y,w,b,g){s(n,e,y);var x,S,O,A=function(t){if(!f&&t in C)return C[t];switch(t){case m:return function(){return new n(this,t)};case h:return function(){return new n(this,t)}}return function(){return new n(this,t)}},L=e+" Iterator",_=w==h,V=!1,C=t.prototype,M=C[p]||C[d]||w&&C[w],E=M||A(w),T=w?_?A("entries"):E:void 0,$="Array"==e&&C.entries||M;if($&&(O=l($.call(new t)),O!==Object.prototype&&O.next&&(u(O,L,!0),o||"function"==typeof O[p]||a(O,p,v))),_&&M&&M.name!==h&&(V=!0,E=function(){return M.call(this)}),o&&!g||!f&&!V&&C[p]||a(C,p,E),c[e]=E,c[L]=v,w)if(x={values:_?E:A(h),keys:b?E:A(m),entries:T},g)for(S in x)S in C||i(C,S,x[S]);else r(r.P+r.F*(f||V),e,x);return x}},"32fc":function(t,e,n){var o=n("e53d").document;t.exports=o&&o.documentElement},"335c":function(t,e,n){var o=n("6b4c");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==o(t)?t.split(""):Object(t)}},"36c3":function(t,e,n){var o=n("335c"),r=n("25eb");t.exports=function(t){return o(r(t))}},"3a38":function(t,e){var n=Math.ceil,o=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?o:n)(t)}},"40c3":function(t,e,n){var o=n("6b4c"),r=n("5168")("toStringTag"),i="Arguments"==o(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,c;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),r))?n:i?o(e):"Object"==(c=o(e))&&"function"==typeof e.callee?"Arguments":c}},"45f2":function(t,e,n){var o=n("d9f6").f,r=n("07e3"),i=n("5168")("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,i)&&o(t,i,{configurable:!0,value:e})}},"469f":function(t,e,n){n("6c1c"),n("1654"),t.exports=n("7d7b")},"481b":function(t,e){t.exports={}},"50ed":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},5168:function(t,e,n){var o=n("dbdb")("wks"),r=n("62a01"),i=n("e53d").Symbol,a="function"==typeof i,c=t.exports=function(t){return o[t]||(o[t]=a&&i[t]||(a?i:r)("Symbol."+t))};c.store=o},"53e2":function(t,e,n){var o=n("07e3"),r=n("241e"),i=n("5559")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),o(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},5559:function(t,e,n){var o=n("dbdb")("keys"),r=n("62a01");t.exports=function(t){return o[t]||(o[t]=r(t))}},"59ad":function(t,e,n){t.exports=n("7be7")},"5b4e":function(t,e,n){var o=n("36c3"),r=n("b447"),i=n("0fc9");t.exports=function(t){return function(e,n,a){var c,s=o(e),u=r(s.length),l=i(a,u);if(t&&n!=n){while(u>l)if(c=s[l++],c!=c)return!0}else for(;u>l;l++)if((t||l in s)&&s[l]===n)return t||l||0;return!t&&-1}}},"5d73":function(t,e,n){t.exports=n("469f")},"62a01":function(t,e){var n=0,o=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+o).toString(36))}},"6b4c":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"6c1c":function(t,e,n){n("c367");for(var o=n("e53d"),r=n("35e8"),i=n("481b"),a=n("5168")("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<c.length;s++){var u=c[s],l=o[u],p=l&&l.prototype;p&&!p[a]&&r(p,a,u),i[u]=i.Array}},"71c1":function(t,e,n){var o=n("3a38"),r=n("25eb");t.exports=function(t){return function(e,n){var i,a,c=String(r(e)),s=o(n),u=c.length;return s<0||s>=u?t?"":void 0:(i=c.charCodeAt(s),i<55296||i>56319||s+1===u||(a=c.charCodeAt(s+1))<56320||a>57343?t?c.charAt(s):i:t?c.slice(s,s+2):a-56320+(i-55296<<10)+65536)}}},"7be7":function(t,e,n){n("0a90"),t.exports=n("584a").parseFloat},"7cd6":function(t,e,n){var o=n("40c3"),r=n("5168")("iterator"),i=n("481b");t.exports=n("584a").getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||i[o(t)]}},"7d7b":function(t,e,n){var o=n("e4ae"),r=n("7cd6");t.exports=n("584a").getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return o(e.call(t))}},"7e90":function(t,e,n){var o=n("d9f6"),r=n("e4ae"),i=n("c3a1");t.exports=n("8e60")?Object.defineProperties:function(t,e){r(t);var n,a=i(e),c=a.length,s=0;while(c>s)o.f(t,n=a[s++],e[n]);return t}},8436:function(t,e){t.exports=function(){}},"8f60":function(t,e,n){"use strict";var o=n("a159"),r=n("aebd"),i=n("45f2"),a={};n("35e8")(a,n("5168")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=o(a,{next:r(1,n)}),i(t,e+" Iterator")}},9003:function(t,e,n){var o=n("6b4c");t.exports=Array.isArray||function(t){return"Array"==o(t)}},9138:function(t,e,n){t.exports=n("35e8")},"98f9":function(t,e,n){},a159:function(t,e,n){var o=n("e4ae"),r=n("7e90"),i=n("1691"),a=n("5559")("IE_PROTO"),c=function(){},s="prototype",u=function(){var t,e=n("1ec9")("iframe"),o=i.length,r="<",a=">";e.style.display="none",n("32fc").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+a+"document.F=Object"+r+"/script"+a),t.close(),u=t.F;while(o--)delete u[s][i[o]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(c[s]=o(t),n=new c,c[s]=null,n[a]=t):n=u(),void 0===e?n:r(n,e)}},a745:function(t,e,n){t.exports=n("f410")},b447:function(t,e,n){var o=n("3a38"),r=Math.min;t.exports=function(t){return t>0?r(o(t),9007199254740991):0}},b8e3:function(t,e){t.exports=!0},c367:function(t,e,n){"use strict";var o=n("8436"),r=n("50ed"),i=n("481b"),a=n("36c3");t.exports=n("30f1")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},c3a1:function(t,e,n){var o=n("e6f3"),r=n("1691");t.exports=Object.keys||function(t){return o(t,r)}},cf49:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:this.cycloContainerClass,attrs:{id:"cyclo-container"}},[!1===this.isMobileOrTablet&&!0===this.popoutAble?n("div",{style:{right:t.popoutPosition},attrs:{id:"inCycloDiv"},on:{click:this.popoutClicked}},[n("font-awesome-icon",{staticClass:"popout-icon",attrs:{icon:"external-link-alt"}})],1):t._e(),n("div",{ref:"cycloviewer",staticClass:"panoramaViewerWindow",attrs:{id:"cycloviewer"}})])},r=[],i=n("5d73"),a=n.n(i),c=(n("a481"),n("59ad")),s=n.n(c),u=n("a745"),l=n.n(u),p=n("a79f"),f={name:"CyclomediaWidget",data:function(){return{docWidth:0,divWidth:0,popoutPosition:0}},props:["screenPercent"],computed:{isMobileOrTablet:function(){return this.$store.state.isMobileOrTablet},fullScreenMapEnabled:function(){return this.$store.state.fullScreenMapEnabled},popoutAble:function(){var t;return t=!1!==this.$config.cyclomedia.popoutAble,t},cyclomediaInitialized:function(){return this.$store.state.cyclomedia.initialized},cyclomediaActive:function(){return this.$store.state.cyclomedia.active},pictometryActive:function(){return this.$store.state.pictometry.active},cycloContainerClass:function(){return this.pictometryActive?"medium-16 large-16 columns mb-panel":"medium-24 large-24 columns mb-panel"},locForCyclo:function(){var t=this.$store.state.geocode.data;this.$store.state.map.map;if(t)return[t.geometry.coordinates[1],t.geometry.coordinates[0]]},latLngFromMap:function(){return this.$store.state.cyclomedia.latLngFromMap},mapCenter:function(){return this.$store.state.map.center},navBarOpen:function(){return this.$store.state.cyclomedia.navBarOpen},projection4326:function(){return"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"},projection2272:function(){return"+proj=lcc +lat_1=40.96666666666667 +lat_2=39.93333333333333 +lat_0=39.33333333333334 +lon_0=-77.75 +x_0=600000 +y_0=0 +ellps=GRS80 +datum=NAD83 +to_meter=0.3048006096012192 +no_defs"}},watch:{fullScreenMapEnabled:function(){this.setDivWidth()},locForCyclo:function(t){t&&this.setNewLocation(t)},latLngFromMap:function(t){this.cyclomediaInitialized&&(l()(t)?this.setNewLocation([t[1],t[0]]):this.setNewLocation([t.lat,t.lng]))},cyclomediaInitialized:function(){var t=this;StreetSmartApi.init({targetElement:this.$refs.cycloviewer,username:this.$config.cyclomedia.username,password:this.$config.cyclomedia.password,apiKey:this.$config.cyclomedia.apiKey,srs:"EPSG:2272",locale:"en-us",addressSettings:{locale:"en-us",database:"CMDatabase"}}).then(function(){var e=t.$store.state.cyclomedia.latLngFromMap;t.setNewLocation([e[0],e[1]])},function(t){}),window.addEventListener("resize",this.setDivWidth)},cyclomediaActive:function(t){this.setDivWidth(),!0===t&&this.setNewLocation(this.latLngFromMap)}},updated:function(){this.cyclomediaActive&&window.panoramaViewer&&window.panoramaViewer.rotateRight(1e-7),this.setDivWidth()},methods:{setDivWidth:function(){var t=document.body.clientWidth;this.docWidth=t;var e,n=document.getElementById("cyclo-container"),o=window.getComputedStyle(n),r=s()(o.getPropertyValue("width").replace("px",""));this.divWidth=r,e=this.fullScreenMapEnabled?t-r+"px":t-(t/this.$props.screenPercent+r)+"px",this.popoutPosition=e},setNewLocation:function(t){if(t){var e=StreetSmartApi.ViewerType.PANORAMA,n=Object(p["a"])(this.projection4326,this.projection2272,[t[1],t[0]]);StreetSmartApi.open(n[0]+","+n[1],{viewerType:e,srs:"EPSG:2272",panoramaViewer:{closable:!1,maximizable:!1}}).then(function(t){var e=this;if(t){for(var n=0;n<t.length;n++)t[n].getType()===StreetSmartApi.ViewerType.PANORAMA&&(window.panoramaViewer=t[n]);e.sendOrientationToStore(),window.panoramaViewer.toggleNavbarExpanded(e.navBarOpen),window.panoramaViewer.toggleButtonEnabled("panorama.elevation",!1),window.panoramaViewer.toggleButtonEnabled("panorama.reportBlurring",!1);var o=!0,r=!1,i=void 0;try{for(var c,s=a()(window.panoramaViewer.props.overlays);!(o=(c=s.next()).done);o=!0){var u=c.value;"surfaceCursorLayer"===u.id&&!0===u.visible&&window.panoramaViewer.toggleOverlay(u)}}catch(l){r=!0,i=l}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}this.$config.cyclomedia.measurementAllowed&&"false"!==this.$config.cyclomedia.measurementAllowed||(StreetSmartApi.removeOverlay("measurementLayer"),window.panoramaViewer.toggleButtonEnabled("panorama.measure",!1)),window.panoramaViewer.on("VIEW_CHANGE",function(){window.panoramaViewer.props.orientation.yaw!==e.$store.state.cyclomedia.orientation.yaw||window.panoramaViewer.props.orientation.xyz!==e.$store.state.cyclomedia.orientation.xyz?e.sendOrientationToStore():window.panoramaViewer.getNavbarExpanded()!==this.navBarOpen&&e.$store.commit("setCyclomediaNavBarOpen",window.panoramaViewer.getNavbarExpanded())}),window.panoramaViewer.on("VIEW_LOAD_END",function(){window.panoramaViewer.props.orientation.yaw!==e.$store.state.cyclomedia.orientation.yaw||window.panoramaViewer.props.orientation.xyz!==e.$store.state.cyclomedia.orientation.xyz?e.sendOrientationToStore():window.panoramaViewer.getNavbarExpanded()!==this.navBarOpen&&e.$store.commit("setCyclomediaNavBarOpen",window.panoramaViewer.getNavbarExpanded())})}}.bind(this)).catch(function(t){})}},sendOrientationToStore:function(){this.$store.commit("setCyclomediaYaw",window.panoramaViewer.props.orientation.yaw),this.$store.commit("setCyclomediaHFov",window.panoramaViewer.props.orientation.hFov);var t=[window.panoramaViewer.props.orientation.xyz[0],window.panoramaViewer.props.orientation.xyz[1]],e=Object(p["a"])(this.projection2272,this.projection4326,t);this.$store.commit("setCyclomediaXyz",e)},popoutClicked:function(){var t=this.$store.state.map.map,e=t.getCenter();window.open("//cyclomedia.phila.gov/?"+e.lat+"&"+e.lng,"_blank"),this.$store.commit("setCyclomediaActive",!1)}}},d=f,m=(n("f18d"),n("2877")),h=Object(m["a"])(d,o,r,!1,null,null,null);e["default"]=h.exports},dbdb:function(t,e,n){var o=n("584a"),r=n("e53d"),i="__core-js_shared__",a=r[i]||(r[i]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:o.version,mode:n("b8e3")?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},e6f3:function(t,e,n){var o=n("07e3"),r=n("36c3"),i=n("5b4e")(!1),a=n("5559")("IE_PROTO");t.exports=function(t,e){var n,c=r(t),s=0,u=[];for(n in c)n!=a&&o(c,n)&&u.push(n);while(e.length>s)o(c,n=e[s++])&&(~i(u,n)||u.push(n));return u}},f18d:function(t,e,n){"use strict";var o=n("98f9"),r=n.n(o);r.a},f410:function(t,e,n){n("1af6"),t.exports=n("584a").Array.isArray}}]);
//# sourceMappingURL=mbmb_pvm_CyclomediaWidget.d9947ea2.js.map